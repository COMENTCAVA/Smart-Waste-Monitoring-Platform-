{% extends 'base.html' %}

{% block title %}Annoter une image{% endblock %}

{% block extra_head %}
  <!-- Si vous voulez un peu de CSS spÃ©cifique Ã  cette page -->
  <style>
    .annotation-container {
      max-width: 600px;
      margin: 2rem auto;
      text-align: center;
    }
    .annotation-container img {
      width: 100%;
      border-radius: 0.75rem;
      box-shadow: 0 .5rem 1rem rgba(0,0,0,0.1);
      margin-bottom: 1.5rem;
    }
    .annotation-buttons > button {
      width: 45%;
      margin: 0 .5%;
      font-size: 1.25rem;
      padding: .75rem 1rem;
      border-radius: .75rem;
      transition: transform .1s ease;
    }
    .annotation-buttons > button:active {
      transform: scale(0.95);
    }
  </style>
{% endblock %}

{% block content %}
<div class="annotation-container bg-white p-4 rounded shadow-sm">
  <h2 class="mb-4">Annoter lâ€™image</h2>

  <img
    src="{{ url_for('static', filename='images/' + img.filename) }}"
    alt="Image Ã  annoter"
    loading="lazy"
  >

  <form method="post" class="annotation-buttons d-flex justify-content-center">
    <button
      type="submit"
      name="label"
      value="Vide"
      class="btn btn-outline-primary btn-lg"
    >
      Vide
    </button>

    <button
      type="submit"
      name="label"
      value="Pleine"
      class="btn btn-outline-success btn-lg"
    >
      Pleine
    </button>
  </form>
</div>
{% endblock %}

{% block scripts %}
<script>
// ðŸ‘‡ Raccourcis clavier : V â†’ â€œVideâ€, P â†’ â€œPleineâ€
document.addEventListener('keydown', e => {
  if (['v','V','p','P'].includes(e.key)) {
    e.preventDefault();
    const val = (e.key.toLowerCase()==='v') ? 'Vide' : 'Pleine';
    document.querySelector(`form button[value="${val}"]`).click();
  }
});
</script>
{% endblock %}