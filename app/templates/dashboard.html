<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Dashboard WDP</title>
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet" crossorigin="anonymous">
  <style>
    /* Taille du camembert manuel */
    #labelChartContainer {
      width: 200px;
      height: 200px;
      margin: auto;
    }
    /* Hauteur uniforme pour tous les autres graphiques */
    .chart-container {
      position: relative;
      height: 250px;
    }
  </style>
</head>
<body class="bg-light">

  <!-- Navbar -->
  <nav class="navbar navbar-expand bg-white shadow-sm mb-4">
    <div class="container">
      <a class="navbar-brand" href="{{ url_for('main.home') }}">← Upload</a>
      <a class="nav-link" href="{{ url_for('main.settings') }}">⚙️ Settings</a>
    </div>
  </nav>

  <div class="container">

    <!-- Résumé global / Accuracy -->
    <div id="overallStats" class="row text-center mb-4"></div>

    <!-- Filtres (dates + labels) -->
    <div class="row g-3 mb-4">
      <div class="col-md-2">
        <input id="filterDateFrom" type="date" class="form-control">
      </div>
      <div class="col-md-2">
        <input id="filterDateTo" type="date" class="form-control">
      </div>
      <div class="col-md-2">
        <select id="filterManual" class="form-select">
          <option value="">Manuel : Tous</option>
          <option value="Vide">Vide</option>
          <option value="Pleine">Pleine</option>
        </select>
      </div>
      <div class="col-md-2">
        <select id="filterAuto" class="form-select">
          <option value="">Auto : Tous</option>
          <option value="Vide">Vide</option>
          <option value="Pleine">Pleine</option>
        </select>
      </div>
      <div class="col-md-2">
        <button id="applyFilters" class="btn btn-primary w-100">Filtrer</button>
      </div>
    </div>

    <!-- Graphiques -->
    <div class="row gy-4">
      <!-- Pie manuel -->
      <div class="col-md-6 text-center">
        <h5>% Manuel</h5>
        <div id="labelChartContainer">
          <canvas id="labelChart"></canvas>
        </div>
      </div>
      <!-- Taille de fichier -->
      <div class="col-md-6">
        <h5>Taille de fichier</h5>
        <div class="chart-container">
          <canvas id="fileSizeChart"></canvas>
        </div>
      </div>
      <!-- Contraste -->
      <div class="col-md-6">
        <h5>Contraste</h5>
        <div class="chart-container">
          <canvas id="contrastChart"></canvas>
        </div>
      </div>
      <!-- Contours détectés -->
      <div class="col-md-6">
        <h5>Contours détectés</h5>
        <div class="chart-container">
          <canvas id="edgesChart"></canvas>
        </div>
      </div>
    </div>

    <!-- Grille d’images -->
    <div id="imagesContainer" class="row row-cols-1 row-cols-md-3 g-4 mt-4"></div>

    <!-- Bouton Charger plus -->
    <button
      id="loadMore"
      class="btn btn-outline-secondary w-100 my-4">
      Charger plus
    </button>

  </div>

  <!-- Librairies JS en defer -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3" defer></script>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
    defer crossorigin="anonymous"></script>
  <!-- Notre script d’interactivité -->
  <script src="{{ url_for('static', filename='js/dashboard.js') }}" defer></script>
</body>
</html>